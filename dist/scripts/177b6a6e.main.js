!function(){var a=window.Alarma=Ember.Application.create({ready:function(){localStorage.clear()}});a.FocusTextAreaComponent=Ember.TextArea.extend({becomeFocused:function(){this.$().focus()}.on("didInsertElement")})}(),function(){Alarma.ApplicationSerializer=DS.LSSerializer.extend(),Alarma.ApplicationAdapter=DS.LSAdapter.extend({})}(),function(){Alarma.Tweet=DS.Model.extend({text:DS.attr("string"),created_at:DS.attr("string"),channel:DS.attr("string")})}(),function(){function a(a){return a}Alarma.Router.map(function(){this.resource("tweets",{path:"/"},function(){this.route("earthquakes"),this.route("fires"),this.route("tweetout")})});var b=[{created_at:a("2014-05-09T09:00:12Z"),text:"Un gran abrazo a todos los trabajadores afectados por el #IncendioValpo y #TerremotoNorteChile #1deMayo",channel:"fire"},{created_at:a("2014-03-06T02:12:14Z"),text:"#IncendioValpo Intendente de Valparaíso: Es imposible reconstruir https://pbs.twimg.com/media/Bm1TwMbIQAAUY-U.jpg 3.500 casas en dos semanas http://bit.ly/1fwNiDX  vía @Cooperativa",channel:"fire"},{created_at:a("2013-10-06T02:12:12Z"),text:"Un gran abrazo a todos los trabajadores afectados por el #IncendioValpo y #TerremotoNorteChile https://pbs.twimg.com/media/BmliIQQIgAA2dTi.jpg #1deMayo",channel:"fire"},{created_at:a("2013-08-06T02:12:12Z"),text:"#IncendioValpo Intendente de Valparaíso: Es imposible reconstruir 3.500 casas en dos semanas http://bit.ly/1fwNiDX  vía @Cooperativa",channel:"fire"},{created_at:a("2013-08-06T02:12:12Z"),text:"Un gran abrazo a todos los trabajadores afectados por el #IncendioValpo y #TerremotoNorteChile #1deMayo http://t.co/xHp4JCC8eS",channel:"fire"},{created_at:a("2014-02-06T02:12:12Z"),text:"#IncendioValpo Intendente de Valparaíso: Es imposible reconstruir 3.500 casas en dos semanas http://bit.ly/1fwNiDX  vía @Cooperativa",channel:"fire"},{created_at:a("2013-09-06T02:12:12Z"),text:"¡Fuerza Iquique y Arica! Iquique paraliza y sale a marchar contra lenta reconstrucción del Gobierno post terremoto http://t.co/8HCo1JsyNp http://rbb.cl/99tu",channel:"earthquake"},{created_at:a("2013-08-06T02:12:12Z"),text:"Lo bueno del terremoto: ¡Por fin se dará solución a viviendas de población Guañacagua! http://tinyurl.com/jvhzvyd  #Arica",channel:"earthquake"},{created_at:a("2014-01-06T02:12:12Z"),text:"¡Fuerza Iquique y Arica! Iquique paraliza y sale a marchar contra lenta reconstrucción del Gobierno post terremoto http://t.co/DVzXWYGVDX",channel:"earthquake"},{created_at:a("2013-08-06T02:12:12Z"),text:"Lo bueno del terremoto: ¡Por fin se dará solución a viviendas de población Guañacagua! http://t.co/FlZWYKLJpg  #Arica",channel:"earthquake"}];Alarma.ApplicationRoute=Ember.Route.extend({}),Alarma.TweetsRoute=Ember.Route.extend({model:function(){function a(b,c,d){var e=b.split("<br>");if(c>e.length-1||e[c].length<d)return b;var f=e[c],g=f.substring(0,d),h=f.substring(d,f.length),i=g+"<br>"+h;return e[c]=i,a(e.join("<br>"),c+1,d)}var c=this;return b.forEach(function(b){var c=new Array,d=27;b.text.split(" ").forEach(function(b){b.length>d?(newStr=a(b,0,d),console.log(newStr),c.push(newStr)):c.push(b)}),b.text=c.join(" ")}),b.forEach(function(a){c.store.createRecord("tweet",a)}),this.store.find("tweet")},setupController:function(){this.controllerFor("tweets").set("title","Terremotos")}}),Alarma.TweetsController=Ember.ArrayController.extend({sortProperties:["created_at"],sortAscending:!1}),Alarma.TweetsIndexController=Ember.ArrayController.extend({sortProperties:["created_at"],sortAscending:!1}),Alarma.TweetsFiresController=Ember.ArrayController.extend({sortProperties:["created_at"],sortAscending:!1}),Alarma.TweetsEarthquakesController=Ember.ArrayController.extend({sortProperties:["created_at"],sortAscending:!1}),Alarma.TweetController=Ember.ObjectController.extend({IsValidImageUrl:function(a,b){$("<img>",{src:a,error:function(){},load:function(){b.set("image",a)}})},image:function(){var a=null,b=new RegExp("(www.[a-zA-Z0-9]*(.[a-zA-Z]*))+|http[s]+:/+(www.)?[<br>a-zA-Z0-9-]*([?|.|/-][<br>=a-zA-Z0-9]*)+"),c=this.get("model.text"),d=b.exec(c);if(d){var e=d[0].replace(/<br>/g,"");this.IsValidImageUrl(e,this)}return a}.property(),timePassed:function(){var a,b=new Date(this.get("model.created_at")),c=new Date,d=864e5,e=(c-b)/d;switch(!0){case 0==parseInt(e):a="ahora";break;case 61>24*e*60:a=parseInt(24*e*60*60)+"s";break;case 1>24*e:a=parseInt(24*e*60)+"m";break;case 1>e:a=parseInt(24*e)+"h";break;default:a=parseInt(e)+"d"}return a}.property()}),Alarma.TweetsTweetoutRoute=Ember.Route.extend({setupController:function(){this.controllerFor("tweets").set("title","Componer Msj")}}),Alarma.TweetsTweetoutController=Ember.ArrayController.extend({text:null,selectedChannel:"",channels:[{value:"",label:"#generico"},{value:"earthquake",label:"#terremotos"},{value:"fire",label:"#incendios"}],actions:{tweet:function(){var a=new Date,b=a.toISOString().substring(0,19)+"Z",c=this.store.createRecord("tweet",{created_at:b,text:this.get("text"),channel:this.get("selectedChannel")});this.set("text",""),c.save(),this.transitionTo("tweets")}}}),Alarma.TweetsIndexRoute=Ember.Route.extend({model:function(){return this.modelFor("tweets")},setupController:function(a,b){this.controllerFor("tweets").set("title","Todas"),this.controller.set("model",b)}}),Alarma.TweetsEarthquakesRoute=Ember.Route.extend({model:function(){return this.modelFor("tweets").filterProperty("channel","earthquake")},renderTemplate:function(a){this.render("tweets/index",{controller:a})},setupController:function(a,b){this.controllerFor("tweets").set("title","Terremotos"),a.set("model",b)}}),Alarma.TweetsFiresRoute=Ember.Route.extend({model:function(){return this.modelFor("tweets").filterProperty("channel","fire")},renderTemplate:function(a){this.render("tweets/index",{controller:a})},setupController:function(a,b){this.controllerFor("tweets").set("title","Incendios"),a.set("model",b)}})}();